{"version":3,"file":"static/webpack/static/development/pages/index.js.2ffe8d3c01a847f74113.hot-update.js","sources":["webpack:///./components/test/Diff.tsx"],"sourcesContent":["import React from 'react'\n\nimport {diffString} from 'json-diff'\n\n\nconst EMPTY = '\"\"';\n\nconst handleJsonDiff = (oldJson:any, newJson:any) => {\n    let mergedOldJson = oldJson || EMPTY;\n    let mergedNewJson = newJson || EMPTY;\n    try{\n        mergedOldJson = JSON.parse(mergedOldJson)\n        mergedNewJson = JSON.parse(mergedNewJson)\n    }catch(err){\n        throw new Error('invalid json')\n    }\n    return diffString(mergedOldJson, mergedNewJson)\n}\n\ninterface IJsonDiffProps{\n    oldJson:any,\n    newJson:any,\n    raw?:boolean,\n}\nconst JsonDiff:React.SFC<IJsonDiffProps> = ({oldJson, newJson, raw})=>{\n    let diff:string;\n    try{\n        if(raw){\n            diff = handleJsonDiff(oldJson, newJson)\n        }else{\n            diff = diffString(oldJson, newJson)\n        }\n    }catch(err){\n        return <div>JSON ERROR</div>\n    }\n    console.log(\"diff\", diff)\n    return (\n        <div style={{overflow:'auto', width:400}}>\n            <pre>\n                {\n                    diff.split('\\n').map((e, i)=>{\n                        let row = null\n                        if(e.indexOf('[31m-') > -1 && e.indexOf('[39m') > -1){\n                            row = <p key={i} className=\"delete\">{e}</p>\n                        }else if(e.indexOf('[32m+') > -1 && e.indexOf(\"[39m\") > -1){\n                            row = <p key={i} className=\"add\">{e}</p>\n                        }else{\n                            row = <p key={i}>{e}</p>\n                        }\n                        return row\n                    })\n                }\n            </pre>\n        </div>\n    )\n}\n\nexport default JsonDiff"],"mappings":";;;;;;;;;;;;;;;;AAAA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAMA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAKA;AACA;AACA;;;;A","sourceRoot":""}