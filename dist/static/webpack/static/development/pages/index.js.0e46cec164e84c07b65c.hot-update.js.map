{"version":3,"file":"static/webpack/static/development/pages/index.js.0e46cec164e84c07b65c.hot-update.js","sources":["webpack:///./components/test/Diff.tsx"],"sourcesContent":["import React from 'react'\n\nimport {diffString} from 'json-diff'\n\nimport './diff.less'\n\nconst EMPTY = '\"\"';\n\nconst handleJsonDiff = (oldJson:any, newJson:any) => {\n    let mergedOldJson = oldJson || EMPTY;\n    let mergedNewJson = newJson || EMPTY;\n    try{\n        mergedOldJson = JSON.parse(mergedOldJson)\n        mergedNewJson = JSON.parse(mergedNewJson)\n    }catch(err){\n        throw new Error('invalid json')\n    }\n    return diffString(mergedOldJson, mergedNewJson)\n}\n\ninterface IJsonDiffProps{\n    oldJson:any,\n    newJson:any,\n    raw?:boolean,\n}\nconst JsonDiff:React.SFC<IJsonDiffProps> = ({oldJson, newJson, raw})=>{\n    let diff:any;\n    try{\n        if(raw){\n            diff = handleJsonDiff(oldJson, newJson)\n        }else{\n            diff = diffString(oldJson, newJson)\n        }\n    }catch(err){\n        return <div>JSON ERROR</div>\n    }\n    console.log(\"diff\", diff)\n    return (\n        <div style={{overflow:'auto', width:400}}>\n            <pre>\n                {\n                    typeof diff === 'string' && diff.split('\\n').map((e, i)=>{\n                        let row = null\n                        if (e.indexOf('[31m-') > -1 && e.indexOf('[39m') > -1) {\n                            row = <p key={ i } className={'delete' }>{ e.replace( new RegExp('\\\\[31m|\\\\[39m','gm'),'') }</p>;\n                          } else if (e.indexOf('[32m+') > -1 && e.indexOf('[39m') > -1) {\n                            row = <p key={ i } className={ 'add' }>{ e.replace( new RegExp('\\\\[32m|\\\\[39m','gm'),'') }</p>;\n                          } else {\n                            row = <p key={ i }>{ e }</p>;\n                          }\n                  \n                        return row\n                    })\n                }\n            </pre>\n        </div>\n    )\n}\n\nexport default JsonDiff"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAMA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;;;;A","sourceRoot":""}