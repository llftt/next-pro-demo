{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _Button from \"antd/lib/button\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Index as IndexComp } from '@components/Index';\nimport Title from '@components/common/Title';\n/**Link, */\n\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport { stringify } from '@utils/index';\nimport axios from 'axios';\nimport JsonDiff from '@components/test/Diff'; // import Head from 'next/head'\n\nimport '@static/styles/common.less';\n\nvar Index =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Index, _React$Component);\n\n  function Index() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Index)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"onBtnClick\", function () {\n      console.log('click');\n    });\n\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      Router.events.on('', function (url) {\n        console.log(\"App is changing to:\", url);\n      });\n      Router.events.on('', function (url) {\n        console.log('App change complete:', url);\n      });\n      Router.events.on('', function (err, url) {\n        if (err.cancelled) {\n          console.log(\"Route to \".concat(url, \" was cancelled!\"));\n        }\n      });\n      Router.beforePopState(function (_ref) {\n        var url = _ref.url;\n        console.log('beforePopState:', url);\n        return true;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", null, __jsx(Title, null), __jsx(\"pre\", null, \"InitialProps: \", stringify(this.props.data)), __jsx(Link, {\n        href: \"/about\"\n      }, __jsx(\"a\", {\n        title: \"about page\"\n      }, \"click,link router\")), __jsx(\"br\", null), __jsx(Link, {\n        href: {\n          pathname: '/about',\n          query: {\n            name: 'test'\n          }\n        },\n        replace: true\n      }, __jsx(\"a\", null, \"click,link router with params\")), __jsx(\"div\", null, \"Router API \", __jsx(\"button\", {\n        onClick: function onClick() {\n          return Router.push('/category', '/category/1', {\n            gametype: '1'\n          });\n        }\n      }, \"click, API\")), __jsx(IndexComp, null), __jsx(\"img\", {\n        src: require(\"@images/cat.jpg\")\n      }), __jsx(_Button, {\n        onClick: this.onBtnClick\n      }, \"Antd button\"), __jsx(\"div\", {\n        className: \"common\"\n      }), __jsx(JsonDiff, {\n        oldJson: {\n          workflows: [{\n            foo: 'abc'\n          }]\n        },\n        newJson: {\n          workflows: [{\n            foo: 'abz',\n            test: 'aa'\n          }]\n        }\n      }));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    //拓展\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get('http://localhost:3001/api/test');\n\n              case 2:\n                res = _context.sent;\n                console.log('res:', res.data);\n                return _context.abrupt(\"return\", {\n                  data: res.data\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps() {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Index;\n}(React.Component);\n\nexport { Index as default };","map":{"version":3,"sources":["/Users/lixiangfei/code/node-next-test/pages/index.tsx"],"names":["React","Index","IndexComp","Title","Link","Router","stringify","axios","JsonDiff","console","log","events","on","url","err","cancelled","beforePopState","props","data","pathname","query","name","push","gametype","require","onBtnClick","workflows","foo","test","get","res","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {Index as IndexComp} from '@components/Index'\nimport Title from '@components/common/Title'\n/**Link, */\nimport Link  from 'next/link'\nimport Router from 'next/router'\nimport {stringify} from '@utils/index'\nimport axios from 'axios'\n\nimport {Button} from 'antd'\nimport JsonDiff from '@components/test/Diff'\n// import Head from 'next/head'\n\nimport '@static/styles/common.less'\n\nexport default class Index extends React.Component<{data:any}>{\n    //拓展\n    static async getInitialProps(){\n        \n        // throw new Error('fakeErr') 获取数据失败，展示默认错误页面\n        let res = await axios.get('http://localhost:3001/api/test')\n        console.log('res:',res.data)\n        return {\n            data: res.data\n        }\n    }\n\n\n    componentDidMount(){\n        Router.events.on('', (url:string) => {\n            console.log(`App is changing to:`, url)\n        })\n\n        Router.events.on('',(url:string) =>{\n            console.log('App change complete:', url)\n        })\n\n        Router.events.on('', (err:any, url:string) => {\n            if (err.cancelled) {\n              console.log(`Route to ${url} was cancelled!`)\n            }\n        })\n\n        Router.beforePopState(({ url }:{url:string}) => {\n            console.log('beforePopState:', url)\n            return true\n          });\n    }\n\n    onBtnClick = ()=>{\n        console.log('click')\n    }\n    render(){\n            \n        return (<div>\n                <Title />\n                <pre>InitialProps: {stringify(this.props.data)}</pre>\n                <Link href=\"/about\">\n                    <a title=\"about page\">click,link router</a>\n                </Link>\n                <br/>\n              \n                <Link href={{pathname:'/about', query:{name:'test'}}} replace>\n                    <a>click,link router with params</a>\n                </Link>\n                <div>\n                    Router API <button onClick={()=> Router.push('/category', '/category/1', {gametype:'1'}) }>click, API</button>\n                </div>\n                <IndexComp />\n                <img src={require(\"@images/cat.jpg\")} />\n                \n                <Button onClick={this.onBtnClick}>Antd button</Button>\n                <div className=\"common\" />\n\n                <JsonDiff oldJson={{workflows:[{foo:'abc'}]}} newJson={{workflows:[{foo:'abz', test:'aa'}]}} />\n            </div>)\n    }\n}"]},"metadata":{},"sourceType":"module"}